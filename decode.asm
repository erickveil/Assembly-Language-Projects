COMMENT*
	decode.asm
	Erick Veil
	10-17-11
	Accepts an encoded number up to 11 bits
	Decodes value into an 7 bit value
*

EXTRN	GETDEC$:FAR
EXTRN	PUTDEC$:FAR
EXTRN	PUTBIN:FAR
EXTRN	PUTOCT:FAR
EXTRN	PUTSTRNG:FAR
EXTRN	NEWLINE:FAR
EXTRN	PAUSE:FAR
EXTERN	CLEAR:FAR

PAGE		80,132
.MODEL		SMALL,BASIC
.STACK		64
.FARDATA	DSEG
	PACK	DW	0
	CODE	DW	0000000000000000B

	MASK_A	DW	0000000000000111B
	MASK_B	DW	0000000000111000B
	MASK_C	DW	0000000001000000B
	
	MASK_1	DW	0000010101010101B
	MASK_2	DW	0000001100110011B
	MASK_4	DW	0000000011110000B
	MASK_8	DW	0000000000001111B
	
	ROT_1	DW	10
	ROT_2	DW	9
	ROT_4	DW	7
	ROT_8	DW	3
	
	MSG_TITLE	DB	'*** decode.asm by Erick Veil ***';34
	MSG_PROMPT	DB	'Enter number for decoding: ';27
	MSG_INBIN	DB	'Input value in binary:   ' ;25
	MSG_INOCT	DB	'Input value in octal:    '
	MSG_BAD		DB	'Bad bit:                 '
	MSG_OUTBIN	DB	'Decoded value in binary: '
	MSG_OUTOCT	DB	'Decoded value in octal:  '
	MSG_PAUSE	DB	'Press enter to continue.. ' ;26
	SUFX_OCT	DB	'Q' ;1
	SUFX_BIN	DB	'B'
.CODE 
	ASSUME	DS:DSEG,ES:DSEG
MAIN	PROC	FAR

	MOV		AX,	SEG	DSEG
	MOV		DS,AX
	MOV		AX,	SEG	DSEG
	MOV		ES,AX
	
	CALL	HEAD
	
.EXIT
MAIN	ENDP


HEAD	PROC	NEAR PUBLIC	USES CX 
	PUSHF
	
	CALL	NEWLINE	
	LEA		DI,MSG_TITLE
	MOV		CX,34	
	CALL	PUTSTRNG
	CALL	NEWLINE	
	CALL	NEWLINE	
	LEA		DI,MSG_PROMPT
	MOV		CX,27
	CALL	PUTSTRNG
	
	POPF
	RET
HEAD	ENDP

END		MAIN
